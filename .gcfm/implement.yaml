version: 1
profile: default
requires:
  - "make"
  - "docker"
  - "docker-compose"
allowed_paths:
  - "docs/**"
  - "deploy/**"
  - "scripts/**"
  - "Makefile"
  - "cmd/**"
  - "internal/**"
runs:
  - name: deps
    cmd: ["make", "deps"]
  - name: migrate
    cmd: ["make", "migrate"]
  - name: up-api
    cmd: ["docker", "compose", "-f", "deploy/compose/docker-compose.local.yml", "up", "-d", "db", "api-server"]
  - name: smoke
    cmd: ["scripts/smoke.sh"]
